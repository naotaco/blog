---
layout: single
title: GTX3060と1060でDaVinci Resolveの書き出し速度を比較する
date: 2022-05-24 01:22:13 +09:00
categories: PC 自作 動画
---

最近ようやっとビデオカードの値段が下がってきたので、GTX3060の板を買った。

ASUSのDUAL-RTX3060-O12G-V2で、適当に調べた範囲で3060搭載で最も安かった。54000円程度。年明けのピークには8万円くらいだったようなので、ずいぶん常識的な値段といえる（本当か？）。3万くらいのミドルレンジのボードを適当に買うようなことを昔からずっとやっておったと思うんじゃがのう……。

[![](/assets/images/posts/2022-05-24-01-24-59.png){:width="80%" .align-center} ](/assets/images/posts/2022-05-24-01-24-59.png)

上が3060で、下が長いこと使っていた1060（6GB）の板。新しい製品に買い換えたら大きさが小さくなるという、一昔前なら当たり前だった体験。以前は板が長くて曲がるので下から支えるステーを使っていたが、この長さなら不要だろうということで外した。そもそもステーが必要な板ってなんなんだよ。

さて、ゲームをまるでやらない私にとってGPUというのは写真や動画を編集するアプリの動作が速くなるかどうかだけが関心事といえる。使っているのは静止画現像にLightroom, 動画編集にはDaVinci Resolve studioだ。Lightroomは通常時の動作にのみGPUを使っていて、書き出し時はほとんど使っていない（ように見える）ので、比較はしづらい。普段の拡大やプレビューが速くなっていると信じて使っていくしかない。

DaVinci Resolveの場合は動画のエンコードにNVIDIAを選択するとGPUでエンコードができる。書き出し中のGPU使用率はタスクマネージャで見た感じ100%となり、ベンチマークごっこにはよさそうである。

ということで、手元のプロジェクトで新旧のGPUで書き出しを実行し、時間を計ってみることにした。ソースは4K, 60fps, H.265, 10bit, 4:2:2で、出力は4K, 60fps, H.265, MP4、画質はMediumといういつもの設定である。

まずはほとんど画像処理を入れていないプロジェクトで試したところ、**速度は全く変わらなかった**。Colorセクションで軽くガンマやゲインをいじっている程度なので、素のエンコードに近い処理なのだろう。タスクマネージャでGPUのところを見てみると、Video Encodeが100%に貼りついていた。数分の動画何本かで比較してみたが、まるで速度は変わらず。ASUSのツールで上限までOCしてもほとんど変化はなかった。つらい。これはさっさと損切りして売っぱらった方がよいのでは……という気になりつつ、落ち着いてほかの条件でも試してみることにした。

別のプロジェクトで、S-Log3で撮影してLUTをあて、さらにノイズリダクション（以下NR）をかけているものがあったので、これでも試してみた。LUTはともかく、NRを有効にすると書き出しがめちゃくちゃ重くなることを思い出したのだ。

[![](/assets/images/posts/2022-05-24-01-37-05.png){:width="80%" .align-center} ](/assets/images/posts/2022-05-24-01-37-05.png)

左が1060、右が3060の結果である。見づらいが、緑の字で書いてある所要時間が劇的に短くなっているのがみてとれる。よかったよかった。

Timelineによって高速化具合に差がある。LUTは全てのクリップにあてているがNRはそうではない（Timeline1, 3で一部のクリップにかけていたくらい）ので、NR処理の高速化が目立っているのかもしれない。NRはもともとめちゃくちゃ時間がかかっていたので……。また、NRをかけていないクリップもそれなりに高速化しているように見えるので、LUTをあてる処理も高速化しているのかも。

まあ、最近はLogで撮ることがほとんどないので、LUTをあてることもなく高ISOでノイズが気になることもほとんどないから、御利益があるかと言われると大いに怪しいが……。すくなくともNRを使うことをためらわずに済みそうなのはよいことだな。

あとはOptimized mediaの生成が速くなればいいんだけど、あればCPUバウンドっぽいので無理だろうなあ。

ということで今回の買い換えは、一定の効果はあったがコスパは全く良くなかったといえる。まあいいか。。



